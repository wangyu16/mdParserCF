name = "mdparser-cf"
main = "dist/worker.js"
compatibility_date = "2024-12-16"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Account Configuration
account_id = "5e31c39e6707bdbf96972cf7f5b742be"
# zone_id = "your-zone-id"

# Security: API Key for authentication (optional)
# Uncomment and set via: wrangler secret put API_KEY
# Or set in Cloudflare dashboard: Workers & Pages > mdparser-cf > Settings > Variables
# [vars]
# API_KEY = ""  # Leave empty or comment out for open API (no authentication)

# Development server configuration
[env.development]
name = "mdparser-cf-dev"
workers_dev = true

# Staging environment
[env.staging]
name = "mdparser-cf-staging"
workers_dev = true
route = "mdparser-staging.example.com/*"
# zone_id = "your-staging-zone-id"

# Production environment
[env.production]
name = "mdparser-cf"
workers_dev = false
route = "mdparser.example.com/*"
# zone_id = "your-production-zone-id"

# Environment variables
[env.production.vars]
LOG_LEVEL = "warn"
CACHE_ENABLED = "true"
CACHE_TTL = "3600"

[env.staging.vars]
LOG_LEVEL = "info"
CACHE_ENABLED = "true"
CACHE_TTL = "600"

[env.development.vars]
LOG_LEVEL = "debug"
CACHE_ENABLED = "false"

# Build configuration
[build]
command = "npm run build:worker"
watch_dirs = ["src"]

# Analytics Engine (optional, for performance monitoring)
# [[analytics.datasets]]
# dataset = "markdown_parser_metrics"

# Triggers (optional)
# [[triggers.crons]]
# cron = "0 */6 * * *"  # Every 6 hours
