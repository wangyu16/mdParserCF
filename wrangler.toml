name = "mdparser-cf"
type = "javascript"
main = "src/cloudflare/worker.ts"
compatibility_date = "2024-12-16"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Account Configuration (fill these in)
# account_id = "your-account-id"
# zone_id = "your-zone-id"

# Development server configuration
[env.development]
name = "mdparser-cf-dev"
workers_dev = true

# Staging environment
[env.staging]
name = "mdparser-cf-staging"
workers_dev = true
route = "mdparser-staging.example.com/*"
# zone_id = "your-staging-zone-id"

# Production environment
[env.production]
name = "mdparser-cf"
workers_dev = false
route = "mdparser.example.com/*"
# zone_id = "your-production-zone-id"

# Environment variables
[env.production.vars]
LOG_LEVEL = "warn"
CACHE_ENABLED = "true"
CACHE_TTL = "3600"

[env.staging.vars]
LOG_LEVEL = "info"
CACHE_ENABLED = "true"
CACHE_TTL = "600"

[env.development.vars]
LOG_LEVEL = "debug"
CACHE_ENABLED = "false"

# Build configuration
[build]
command = "npm install && npm run build"
cwd = "."
main = "src/cloudflare/worker.ts"

[build.upload]
format = "service-worker"

# Analytics Engine (optional, for performance monitoring)
# [[analytics.datasets]]
# dataset = "markdown_parser_metrics"

# Triggers (optional)
# [[triggers.crons]]
# cron = "0 */6 * * *"  # Every 6 hours
